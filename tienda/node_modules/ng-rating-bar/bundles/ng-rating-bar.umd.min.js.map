{"version":3,"sources":["ng://ng-rating-bar/lib/ng-rating-bar.component.ts","ng://ng-rating-bar/lib/ng-rating-bar.module.ts"],"names":["NgRatingBarComponent","EventEmitter","prototype","ngOnInit","this","ratingCount","colorActive","colorDefault","styles","fontSize","backgroundColor","margin","ngOnChanges","changes","control","initNumbers","calculateHalfValue","numbers","Array","fill","map","x","i","selectedValue","value","hoverIndex","enter","disabled","isHovered","hoverChange","emit","leave","setSelected","resetAble","setValue","markAsTouched","valueChange","halfValue","Math","round","floor","halfIndex","ceil","Component","args","selector","template","Input","Output","NgRatingBarModule","NgModule","imports","CommonModule","declarations","exports"],"mappings":"mUAAA,IAAAA,EAAA,WAgEE,SAAAA,qBAT8C,IAAIC,EAAAA,8BACJ,IAAIA,EAAAA,0BAExC,oBACI,qBACE,iBACJ,kBACC,kBACD,SAGZD,EAAAE,UAAAC,SAAA,WACEC,KAAKC,YAAcD,KAAKC,aAAe,EACvCD,KAAKE,YAAcF,KAAKE,aAAe,UACvCF,KAAKG,aAAeH,KAAKG,cAAgB,UAGpCH,KAAKI,SACRJ,KAAKI,OAAS,CACZC,SAAU,OACVC,gBAAiB,GACjBC,OAAQ,SAKdX,EAAAE,UAAAU,YAAA,SAAYC,IACNA,EAAO,OAAUT,KAAKU,WACxBV,KAAKW,cACLX,KAAKY,uBAIThB,EAAAE,UAAAa,YAAA,WACEX,KAAKa,QAAUC,MAAMd,KAAKC,aACvBc,KAAK,GACLC,IAAI,SAACC,EAAGC,GAAM,OAAAA,IACblB,KAAKU,QACPV,KAAKmB,cAAgBnB,KAAKU,QAAQU,MAElCpB,KAAKmB,cAAgBnB,KAAKoB,MAG5BpB,KAAKqB,WAAarB,KAAKmB,cAAgB,GAGzCvB,EAAAE,UAAAwB,MAAA,SAAMJ,GACAlB,KAAKuB,WAGTvB,KAAKwB,WAAY,EACjBxB,KAAKqB,WAAaH,EAClBlB,KAAKyB,YAAYC,KAAK,EAAIR,KAI5BtB,EAAAE,UAAA6B,MAAA,SAAMT,GACAlB,KAAKuB,WAGTvB,KAAKwB,WAAY,EACjBxB,KAAKqB,WAAarB,KAAKmB,cAAgB,IAGzCvB,EAAAE,UAAA8B,YAAA,SAAYV,GACNlB,KAAKuB,WAILvB,KAAK6B,WAAa7B,KAAKmB,gBAAkBD,EAAI,EAC/ClB,KAAKmB,cAAgB,EAErBnB,KAAKmB,cAAgBD,EAAI,EAGvBlB,KAAKU,SACPV,KAAKU,QAAQoB,SAAS9B,KAAKmB,eAAiB,MAC5CnB,KAAKU,QAAQqB,iBAEb/B,KAAKgC,YAAYN,KAAK1B,KAAKmB,eAE7BnB,KAAKwB,WAAY,EACjBxB,KAAKY,uBAGPhB,EAAAE,UAAAc,mBAAA,WACEZ,KAAKiC,UAAYC,KAAKC,MAAM,KAAOnC,KAAKmB,cAAgBe,KAAKE,MAAMpC,KAAKmB,iBACxEnB,KAAKqC,UAAYH,KAAKI,KAAKtC,KAAKmB,eAAiB,uBA7HpDoB,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,gBACVC,SAAU,mkBAqBVtC,OAAQ,CAAC,yVAIRuC,EAAAA,2BACAA,EAAAA,4BACAA,EAAAA,wBACAA,EAAAA,yBACAA,EAAAA,uBAEAA,EAAAA,sBAEAA,EAAAA,qBAEAA,EAAAA,2BACAC,EAAAA,4BACAA,EAAAA,YAxDH,GCAAC,EAAA,oDAICC,EAAAA,SAAQN,KAAA,CAAC,CACRO,QAAS,CACPC,EAAAA,cAEFC,aAAc,CAACrD,GACfsD,QAAS,CAACtD,SATZ","sourcesContent":["import {\n  Component,\n  OnInit,\n  Input,\n  Output,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\nexport interface Styles {\n  fontSize?: string;\n  backgroundColor?: string;\n  margin?: string;\n}\n\n@Component({\n  selector: 'ng-rating-bar',\n  template: `<ng-container *ngFor=\"let item of numbers; let i = index\">\r\n  <span\r\n    class=\"star\"\r\n    (mouseenter)=\"enter(i)\"\r\n    (mouseleave)=\"leave(i)\"\r\n    (click)=\"setSelected(i)\"\r\n    [ngStyle]=\"{'color': (i <= hoverIndex) ? colorActive : colorDefault}\"\r\n    [style.fontSize]=\"styles.fontSize\"\r\n    [style.backgroundColor]=\"styles.backgroundColor\"\r\n    [style.marginRight]=\"styles.margin\"\r\n  >\r\n  â\r\n  <span\r\n    class=\"star half\"\r\n    *ngIf=\"!isHovered && i == halfIndex\"\r\n    [style.width.%]=\"halfValue\"\r\n    [style.color]=\"colorActive\"\r\n  >â</span>\r\n</span>\r\n</ng-container>\r\n`,\n  styles: [`.star{position:relative}.star:not(.half){min-height:20px;min-width:20px;cursor:pointer;display:inline-block}.star.active{color:inherit}.star.half{height:inherit;font-size:inherit;cursor:pointer;position:absolute;left:0;top:0;display:inline-block;overflow:hidden}`]\n})\nexport class NgRatingBarComponent implements OnInit, OnChanges {\n\n  @Input() ratingCount: number;\n  @Input() colorActive: string;\n  @Input() colorDefault: string;\n  @Input() disabled: boolean;\n  @Input() resetAble: boolean;\n\n  @Input() control: FormControl;\n\n  @Input() styles: Styles;\n\n  @Input() value: number;\n  @Output() valueChange: EventEmitter<number> = new EventEmitter<number>();\n  @Output() hoverChange: EventEmitter<number> = new EventEmitter<number>();\n\n  numbers = [];\n  hoverIndex = -1;\n  selectedValue = 0;\n  halfValue = 0;\n  halfIndex = -1;\n  isHovered = false;\n  constructor() {}\n\n  ngOnInit() {\n    this.ratingCount = this.ratingCount || 5;\n    this.colorActive = this.colorActive || '#edb867';\n    this.colorDefault = this.colorDefault || '#d2d2d2';\n\n\n    if (!this.styles) {\n      this.styles = {\n        fontSize: '28px',\n        backgroundColor: '',\n        margin: '5px'\n      };\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.value || this.control) {\n      this.initNumbers();\n      this.calculateHalfValue();\n    }\n  }\n\n  initNumbers() {\n    this.numbers = Array(this.ratingCount)\n      .fill(0)\n      .map((x, i) => i);\n    if (this.control) {\n      this.selectedValue = this.control.value;\n    } else {\n      this.selectedValue = this.value;\n    }\n\n    this.hoverIndex = this.selectedValue - 1;\n  }\n\n  enter(i: number) {\n    if (this.disabled) {\n      return;\n    }\n    this.isHovered = true;\n    this.hoverIndex = i;\n    this.hoverChange.emit(1 + i);\n\n\n  }\n  leave(i: number) {\n    if (this.disabled) {\n      return;\n    }\n    this.isHovered = false;\n    this.hoverIndex = this.selectedValue - 1;\n  }\n\n  setSelected(i: number) {\n    if (this.disabled) {\n      return;\n    }\n\n    if (this.resetAble && this.selectedValue === i + 1) {\n      this.selectedValue = 0;\n    } else {\n      this.selectedValue = i + 1;\n    }\n\n    if (this.control) {\n      this.control.setValue(this.selectedValue || null);\n      this.control.markAsTouched();\n    } else {\n      this.valueChange.emit(this.selectedValue);\n    }\n    this.isHovered = false;\n    this.calculateHalfValue();\n  }\n\n  calculateHalfValue() {\n    this.halfValue = Math.round(100 * (this.selectedValue - Math.floor(this.selectedValue)) );\n    this.halfIndex = Math.ceil(this.selectedValue) - 1;\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgRatingBarComponent } from './ng-rating-bar.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [NgRatingBarComponent],\n  exports: [NgRatingBarComponent]\n})\nexport class NgRatingBarModule { }\n"]}