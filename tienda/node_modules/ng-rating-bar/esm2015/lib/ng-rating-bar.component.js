/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { FormControl } from '@angular/forms';
/**
 * @record
 */
export function Styles() { }
/** @type {?|undefined} */
Styles.prototype.fontSize;
/** @type {?|undefined} */
Styles.prototype.backgroundColor;
/** @type {?|undefined} */
Styles.prototype.margin;
export class NgRatingBarComponent {
    constructor() {
        this.valueChange = new EventEmitter();
        this.hoverChange = new EventEmitter();
        this.numbers = [];
        this.hoverIndex = -1;
        this.selectedValue = 0;
        this.halfValue = 0;
        this.halfIndex = -1;
        this.isHovered = false;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.ratingCount = this.ratingCount || 5;
        this.colorActive = this.colorActive || '#edb867';
        this.colorDefault = this.colorDefault || '#d2d2d2';
        if (!this.styles) {
            this.styles = {
                fontSize: '28px',
                backgroundColor: '',
                margin: '5px'
            };
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes["value"] || this.control) {
            this.initNumbers();
            this.calculateHalfValue();
        }
    }
    /**
     * @return {?}
     */
    initNumbers() {
        this.numbers = Array(this.ratingCount)
            .fill(0)
            .map((x, i) => i);
        if (this.control) {
            this.selectedValue = this.control.value;
        }
        else {
            this.selectedValue = this.value;
        }
        this.hoverIndex = this.selectedValue - 1;
    }
    /**
     * @param {?} i
     * @return {?}
     */
    enter(i) {
        if (this.disabled) {
            return;
        }
        this.isHovered = true;
        this.hoverIndex = i;
        this.hoverChange.emit(1 + i);
    }
    /**
     * @param {?} i
     * @return {?}
     */
    leave(i) {
        if (this.disabled) {
            return;
        }
        this.isHovered = false;
        this.hoverIndex = this.selectedValue - 1;
    }
    /**
     * @param {?} i
     * @return {?}
     */
    setSelected(i) {
        if (this.disabled) {
            return;
        }
        if (this.resetAble && this.selectedValue === i + 1) {
            this.selectedValue = 0;
        }
        else {
            this.selectedValue = i + 1;
        }
        if (this.control) {
            this.control.setValue(this.selectedValue || null);
            this.control.markAsTouched();
        }
        else {
            this.valueChange.emit(this.selectedValue);
        }
        this.isHovered = false;
        this.calculateHalfValue();
    }
    /**
     * @return {?}
     */
    calculateHalfValue() {
        this.halfValue = Math.round(100 * (this.selectedValue - Math.floor(this.selectedValue)));
        this.halfIndex = Math.ceil(this.selectedValue) - 1;
    }
}
NgRatingBarComponent.decorators = [
    { type: Component, args: [{
                selector: 'ng-rating-bar',
                template: `<ng-container *ngFor="let item of numbers; let i = index">
  <span
    class="star"
    (mouseenter)="enter(i)"
    (mouseleave)="leave(i)"
    (click)="setSelected(i)"
    [ngStyle]="{'color': (i <= hoverIndex) ? colorActive : colorDefault}"
    [style.fontSize]="styles.fontSize"
    [style.backgroundColor]="styles.backgroundColor"
    [style.marginRight]="styles.margin"
  >
  ★
  <span
    class="star half"
    *ngIf="!isHovered && i == halfIndex"
    [style.width.%]="halfValue"
    [style.color]="colorActive"
  >★</span>
</span>
</ng-container>
`,
                styles: [`.star{position:relative}.star:not(.half){min-height:20px;min-width:20px;cursor:pointer;display:inline-block}.star.active{color:inherit}.star.half{height:inherit;font-size:inherit;cursor:pointer;position:absolute;left:0;top:0;display:inline-block;overflow:hidden}`]
            },] },
];
/** @nocollapse */
NgRatingBarComponent.ctorParameters = () => [];
NgRatingBarComponent.propDecorators = {
    ratingCount: [{ type: Input }],
    colorActive: [{ type: Input }],
    colorDefault: [{ type: Input }],
    disabled: [{ type: Input }],
    resetAble: [{ type: Input }],
    control: [{ type: Input }],
    styles: [{ type: Input }],
    value: [{ type: Input }],
    valueChange: [{ type: Output }],
    hoverChange: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    NgRatingBarComponent.prototype.ratingCount;
    /** @type {?} */
    NgRatingBarComponent.prototype.colorActive;
    /** @type {?} */
    NgRatingBarComponent.prototype.colorDefault;
    /** @type {?} */
    NgRatingBarComponent.prototype.disabled;
    /** @type {?} */
    NgRatingBarComponent.prototype.resetAble;
    /** @type {?} */
    NgRatingBarComponent.prototype.control;
    /** @type {?} */
    NgRatingBarComponent.prototype.styles;
    /** @type {?} */
    NgRatingBarComponent.prototype.value;
    /** @type {?} */
    NgRatingBarComponent.prototype.valueChange;
    /** @type {?} */
    NgRatingBarComponent.prototype.hoverChange;
    /** @type {?} */
    NgRatingBarComponent.prototype.numbers;
    /** @type {?} */
    NgRatingBarComponent.prototype.hoverIndex;
    /** @type {?} */
    NgRatingBarComponent.prototype.selectedValue;
    /** @type {?} */
    NgRatingBarComponent.prototype.halfValue;
    /** @type {?} */
    NgRatingBarComponent.prototype.halfIndex;
    /** @type {?} */
    NgRatingBarComponent.prototype.isHovered;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctcmF0aW5nLWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZy1yYXRpbmctYmFyLyIsInNvdXJjZXMiOlsibGliL25nLXJhdGluZy1iYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUVULEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUdiLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7Ozs7Ozs7QUFpQzdDLE1BQU07SUFzQko7MkJBVDhDLElBQUksWUFBWSxFQUFVOzJCQUMxQixJQUFJLFlBQVksRUFBVTt1QkFFOUQsRUFBRTswQkFDQyxDQUFDLENBQUM7NkJBQ0MsQ0FBQzt5QkFDTCxDQUFDO3lCQUNELENBQUMsQ0FBQzt5QkFDRixLQUFLO0tBQ0Q7Ozs7SUFFaEIsUUFBUTtRQUNOLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxJQUFJLFNBQVMsQ0FBQztRQUNqRCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLElBQUksU0FBUyxDQUFDO1FBR25ELEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDakIsSUFBSSxDQUFDLE1BQU0sR0FBRztnQkFDWixRQUFRLEVBQUUsTUFBTTtnQkFDaEIsZUFBZSxFQUFFLEVBQUU7Z0JBQ25CLE1BQU0sRUFBRSxLQUFLO2FBQ2QsQ0FBQztTQUNIO0tBQ0Y7Ozs7O0lBRUQsV0FBVyxDQUFDLE9BQXNCO1FBQ2hDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sYUFBVSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNsQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDbkIsSUFBSSxD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O0NBb0JYO2dCQUNDLE1BQU0sRUFBRSxDQUFDLHdRQUF3USxDQUFDO2FBQ25SOzs7OzswQkFHRSxLQUFLOzBCQUNMLEtBQUs7MkJBQ0wsS0FBSzt1QkFDTCxLQUFLO3dCQUNMLEtBQUs7c0JBRUwsS0FBSztxQkFFTCxLQUFLO29CQUVMLEtBQUs7MEJBQ0wsTUFBTTswQkFDTixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBPbkluaXQsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgT25DaGFuZ2VzLFxuICBTaW1wbGVDaGFuZ2VzXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3R5bGVzIHtcbiAgZm9udFNpemU/OiBzdHJpbmc7XG4gIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgbWFyZ2luPzogc3RyaW5nO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZy1yYXRpbmctYmFyJyxcbiAgdGVtcGxhdGU6IGA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBpdGVtIG9mIG51bWJlcnM7IGxldCBpID0gaW5kZXhcIj5cclxuICA8c3BhblxyXG4gICAgY2xhc3M9XCJzdGFyXCJcclxuICAgIChtb3VzZWVudGVyKT1cImVudGVyKGkpXCJcclxuICAgIChtb3VzZWxlYXZlKT1cImxlYXZlKGkpXCJcclxuICAgIChjbGljayk9XCJzZXRTZWxlY3RlZChpKVwiXHJcbiAgICBbbmdTdHlsZV09XCJ7J2NvbG9yJzogKGkgPD0gaG92ZXJJbmRleCkgPyBjb2xvckFjdGl2ZSA6IGNvbG9yRGVmYXVsdH1cIlxyXG4gICAgW3N0eWxlLmZvbnRTaXplXT1cInN0eWxlcy5mb250U2l6ZVwiXHJcbiAgICBbc3R5bGUuYmFja2dyb3VuZENvbG9yXT1cInN0eWxlcy5iYWNrZ3JvdW5kQ29sb3JcIlxyXG4gICAgW3N0eWxlLm1hcmdpblJpZ2h0XT1cInN0eWxlcy5tYXJnaW5cIlxyXG4gID5cclxuICDimIVcclxuICA8c3BhblxyXG4gICAgY2xhc3M9XCJzdGFyIGhhbGZcIlxyXG4gICAgKm5nSWY9XCIhaXNIb3ZlcmVkICYmIGkgPT0gaGFsZkluZGV4XCJcclxuICAgIFtzdHlsZS53aWR0aC4lXT1cImhhbGZWYWx1ZVwiXHJcbiAgICBbc3R5bGUuY29sb3JdPVwiY29sb3JBY3RpdmVcIlxyXG4gID7imIU8L3NwYW4+XHJcbjwvc3Bhbj5cclxuPC9uZy1jb250YWluZXI+XHJcbmAsXG4gIHN0eWxlczogW2Auc3Rhcntwb3NpdGlvbjpyZWxhdGl2ZX0uc3Rhcjpub3QoLmhhbGYpe21pbi1oZWlnaHQ6MjBweDttaW4td2lkdGg6MjBweDtjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmlubGluZS1ibG9ja30uc3Rhci5hY3RpdmV7Y29sb3I6aW5oZXJpdH0uc3Rhci5oYWxme2hlaWdodDppbmhlcml0O2ZvbnQtc2l6ZTppbmhlcml0O2N1cnNvcjpwb2ludGVyO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtkaXNwbGF5OmlubGluZS1ibG9jaztvdmVyZmxvdzpoaWRkZW59YF1cbn0pXG5leHBvcnQgY2xhc3MgTmdSYXRpbmdCYXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG5cbiAgQElucHV0KCkgcmF0aW5nQ291bnQ6IG51bWJlcjtcbiAgQElucHV0KCkgY29sb3JBY3RpdmU6IHN0cmluZztcbiAgQElucHV0KCkgY29sb3JEZWZhdWx0OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xuICBASW5wdXQoKSByZXNldEFibGU6IGJvb2xlYW47XG5cbiAgQElucHV0KCkgY29udHJvbDogRm9ybUNvbnRyb2w7XG5cbiAgQElucHV0KCkgc3R5bGVzOiBTdHlsZXM7XG5cbiAgQElucHV0KCkgdmFsdWU6IG51bWJlcjtcbiAgQE91dHB1dCgpIHZhbHVlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBAT3V0cHV0KCkgaG92ZXJDaGFuZ2U6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG5cbiAgbnVtYmVycyA9IFtdO1xuICBob3ZlckluZGV4ID0gLTE7XG4gIHNlbGVjdGVkVmFsdWUgPSAwO1xuICBoYWxmVmFsdWUgPSAwO1xuICBoYWxmSW5kZXggPSAtMTtcbiAgaXNIb3ZlcmVkID0gZmFsc2U7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJhdGluZ0NvdW50ID0gdGhpcy5yYXRpbmdDb3VudCB8fCA1O1xuICAgIHRoaXMuY29sb3JBY3RpdmUgPSB0aGlzLmNvbG9yQWN0aXZlIHx8ICcjZWRiODY3JztcbiAgICB0aGlzLmNvbG9yRGVmYXVsdCA9IHRoaXMuY29sb3JEZWZhdWx0IHx8ICcjZDJkMmQyJztcblxuXG4gICAgaWYgKCF0aGlzLnN0eWxlcykge1xuICAgICAgdGhpcy5zdHlsZXMgPSB7XG4gICAgICAgIGZvbnRTaXplOiAnMjhweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJycsXG4gICAgICAgIG1hcmdpbjogJzVweCdcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLnZhbHVlIHx8IHRoaXMuY29udHJvbCkge1xuICAgICAgdGhpcy5pbml0TnVtYmVycygpO1xuICAgICAgdGhpcy5jYWxjdWxhdGVIYWxmVmFsdWUoKTtcbiAgICB9XG4gIH1cblxuICBpbml0TnVtYmVycygpIHtcbiAgICB0aGlzLm51bWJlcnMgPSBBcnJheSh0aGlzLnJhdGluZ0NvdW50KVxuICAgICAgLmZpbGwoMClcbiAgICAgIC5tYXAoKHgsIGkpID0+IGkpO1xuICAgIGlmICh0aGlzLmNvbnRyb2wpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IHRoaXMuY29udHJvbC52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmhvdmVySW5kZXggPSB0aGlzLnNlbGVjdGVkVmFsdWUgLSAxO1xuICB9XG5cbiAgZW50ZXIoaTogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc0hvdmVyZWQgPSB0cnVlO1xuICAgIHRoaXMuaG92ZXJJbmRleCA9IGk7XG4gICAgdGhpcy5ob3ZlckNoYW5nZS5lbWl0KDEgKyBpKTtcblxuXG4gIH1cbiAgbGVhdmUoaTogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc0hvdmVyZWQgPSBmYWxzZTtcbiAgICB0aGlzLmhvdmVySW5kZXggPSB0aGlzLnNlbGVjdGVkVmFsdWUgLSAxO1xuICB9XG5cbiAgc2V0U2VsZWN0ZWQoaTogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZXNldEFibGUgJiYgdGhpcy5zZWxlY3RlZFZhbHVlID09PSBpICsgMSkge1xuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlID0gaSArIDE7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29udHJvbCkge1xuICAgICAgdGhpcy5jb250cm9sLnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRWYWx1ZSB8fCBudWxsKTtcbiAgICAgIHRoaXMuY29udHJvbC5tYXJrQXNUb3VjaGVkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLnNlbGVjdGVkVmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLmlzSG92ZXJlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2FsY3VsYXRlSGFsZlZhbHVlKCk7XG4gIH1cblxuICBjYWxjdWxhdGVIYWxmVmFsdWUoKSB7XG4gICAgdGhpcy5oYWxmVmFsdWUgPSBNYXRoLnJvdW5kKDEwMCAqICh0aGlzLnNlbGVjdGVkVmFsdWUgLSBNYXRoLmZsb29yKHRoaXMuc2VsZWN0ZWRWYWx1ZSkpICk7XG4gICAgdGhpcy5oYWxmSW5kZXggPSBNYXRoLmNlaWwodGhpcy5zZWxlY3RlZFZhbHVlKSAtIDE7XG4gIH1cblxuXG59XG4iXX0=