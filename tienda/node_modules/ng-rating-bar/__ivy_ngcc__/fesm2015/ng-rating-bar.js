import { Component, Input, Output, EventEmitter, NgModule } from '@angular/core';
import '@angular/forms';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function NgRatingBarComponent_ng_container_0_span_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 3);
    ɵngcc0.ɵɵtext(1, "\u2605");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵstyleProp("width", ctx_r3.halfValue, "%")("color", ctx_r3.colorActive);
} }
const _c0 = function (a0) { return { "color": a0 }; };
function NgRatingBarComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    const _r5 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "span", 1);
    ɵngcc0.ɵɵlistener("mouseenter", function NgRatingBarComponent_ng_container_0_Template_span_mouseenter_1_listener() { const restoredCtx = ɵngcc0.ɵɵrestoreView(_r5); const i_r2 = restoredCtx.index; const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.enter(i_r2); })("mouseleave", function NgRatingBarComponent_ng_container_0_Template_span_mouseleave_1_listener() { const restoredCtx = ɵngcc0.ɵɵrestoreView(_r5); const i_r2 = restoredCtx.index; const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.leave(i_r2); })("click", function NgRatingBarComponent_ng_container_0_Template_span_click_1_listener() { const restoredCtx = ɵngcc0.ɵɵrestoreView(_r5); const i_r2 = restoredCtx.index; const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.setSelected(i_r2); });
    ɵngcc0.ɵɵtext(2, " \u2605 ");
    ɵngcc0.ɵɵtemplate(3, NgRatingBarComponent_ng_container_0_span_3_Template, 2, 4, "span", 2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r2 = ctx.index;
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵstyleProp("font-size", ctx_r0.styles.fontSize)("background-color", ctx_r0.styles.backgroundColor)("margin-right", ctx_r0.styles.margin);
    ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction1(8, _c0, i_r2 <= ctx_r0.hoverIndex ? ctx_r0.colorActive : ctx_r0.colorDefault));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r0.isHovered && i_r2 == ctx_r0.halfIndex);
} }
class NgRatingBarComponent {
    constructor() {
        this.valueChange = new EventEmitter();
        this.hoverChange = new EventEmitter();
        this.numbers = [];
        this.hoverIndex = -1;
        this.selectedValue = 0;
        this.halfValue = 0;
        this.halfIndex = -1;
        this.isHovered = false;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.ratingCount = this.ratingCount || 5;
        this.colorActive = this.colorActive || '#edb867';
        this.colorDefault = this.colorDefault || '#d2d2d2';
        if (!this.styles) {
            this.styles = {
                fontSize: '28px',
                backgroundColor: '',
                margin: '5px'
            };
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes["value"] || this.control) {
            this.initNumbers();
            this.calculateHalfValue();
        }
    }
    /**
     * @return {?}
     */
    initNumbers() {
        this.numbers = Array(this.ratingCount)
            .fill(0)
            .map((x, i) => i);
        if (this.control) {
            this.selectedValue = this.control.value;
        }
        else {
            this.selectedValue = this.value;
        }
        this.hoverIndex = this.selectedValue - 1;
    }
    /**
     * @param {?} i
     * @return {?}
     */
    enter(i) {
        if (this.disabled) {
            return;
        }
        this.isHovered = true;
        this.hoverIndex = i;
        this.hoverChange.emit(1 + i);
    }
    /**
     * @param {?} i
     * @return {?}
     */
    leave(i) {
        if (this.disabled) {
            return;
        }
        this.isHovered = false;
        this.hoverIndex = this.selectedValue - 1;
    }
    /**
     * @param {?} i
     * @return {?}
     */
    setSelected(i) {
        if (this.disabled) {
            return;
        }
        if (this.resetAble && this.selectedValue === i + 1) {
            this.selectedValue = 0;
        }
        else {
            this.selectedValue = i + 1;
        }
        if (this.control) {
            this.control.setValue(this.selectedValue || null);
            this.control.markAsTouched();
        }
        else {
            this.valueChange.emit(this.selectedValue);
        }
        this.isHovered = false;
        this.calculateHalfValue();
    }
    /**
     * @return {?}
     */
    calculateHalfValue() {
        this.halfValue = Math.round(100 * (this.selectedValue - Math.floor(this.selectedValue)));
        this.halfIndex = Math.ceil(this.selectedValue) - 1;
    }
}
NgRatingBarComponent.ɵfac = function NgRatingBarComponent_Factory(t) { return new (t || NgRatingBarComponent)(); };
NgRatingBarComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: NgRatingBarComponent, selectors: [["ng-rating-bar"]], inputs: { ratingCount: "ratingCount", colorActive: "colorActive", colorDefault: "colorDefault", styles: "styles", disabled: "disabled", resetAble: "resetAble", control: "control", value: "value" }, outputs: { valueChange: "valueChange", hoverChange: "hoverChange" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 1, consts: [[4, "ngFor", "ngForOf"], [1, "star", 3, "ngStyle", "mouseenter", "mouseleave", "click"], ["class", "star half", 3, "width", "color", 4, "ngIf"], [1, "star", "half"]], template: function NgRatingBarComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, NgRatingBarComponent_ng_container_0_Template, 4, 10, "ng-container", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngForOf", ctx.numbers);
    } }, directives: [ɵngcc1.NgForOf, ɵngcc1.NgStyle, ɵngcc1.NgIf], styles: [".star[_ngcontent-%COMP%]{position:relative}.star[_ngcontent-%COMP%]:not(.half){min-height:20px;min-width:20px;cursor:pointer;display:inline-block}.star.active[_ngcontent-%COMP%]{color:inherit}.star.half[_ngcontent-%COMP%]{height:inherit;font-size:inherit;cursor:pointer;position:absolute;left:0;top:0;display:inline-block;overflow:hidden}"] });
/** @nocollapse */
NgRatingBarComponent.ctorParameters = () => [];
NgRatingBarComponent.propDecorators = {
    ratingCount: [{ type: Input }],
    colorActive: [{ type: Input }],
    colorDefault: [{ type: Input }],
    disabled: [{ type: Input }],
    resetAble: [{ type: Input }],
    control: [{ type: Input }],
    styles: [{ type: Input }],
    value: [{ type: Input }],
    valueChange: [{ type: Output }],
    hoverChange: [{ type: Output }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NgRatingBarComponent, [{
        type: Component,
        args: [{
                selector: 'ng-rating-bar',
                template: `<ng-container *ngFor="let item of numbers; let i = index">
  <span
    class="star"
    (mouseenter)="enter(i)"
    (mouseleave)="leave(i)"
    (click)="setSelected(i)"
    [ngStyle]="{'color': (i <= hoverIndex) ? colorActive : colorDefault}"
    [style.fontSize]="styles.fontSize"
    [style.backgroundColor]="styles.backgroundColor"
    [style.marginRight]="styles.margin"
  >
  ★
  <span
    class="star half"
    *ngIf="!isHovered && i == halfIndex"
    [style.width.%]="halfValue"
    [style.color]="colorActive"
  >★</span>
</span>
</ng-container>
`,
                styles: [`.star{position:relative}.star:not(.half){min-height:20px;min-width:20px;cursor:pointer;display:inline-block}.star.active{color:inherit}.star.half{height:inherit;font-size:inherit;cursor:pointer;position:absolute;left:0;top:0;display:inline-block;overflow:hidden}`]
            }]
    }], function () { return []; }, { valueChange: [{
            type: Output
        }], hoverChange: [{
            type: Output
        }], ratingCount: [{
            type: Input
        }], colorActive: [{
            type: Input
        }], colorDefault: [{
            type: Input
        }], styles: [{
            type: Input
        }], disabled: [{
            type: Input
        }], resetAble: [{
            type: Input
        }], control: [{
            type: Input
        }], value: [{
            type: Input
        }] }); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class NgRatingBarModule {
}
NgRatingBarModule.ɵfac = function NgRatingBarModule_Factory(t) { return new (t || NgRatingBarModule)(); };
NgRatingBarModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: NgRatingBarModule });
NgRatingBarModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ imports: [[
            CommonModule
        ]] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NgRatingBarModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule
                ],
                declarations: [NgRatingBarComponent],
                exports: [NgRatingBarComponent]
            }]
    }], null, null); })();
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NgRatingBarModule, { declarations: function () { return [NgRatingBarComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [NgRatingBarComponent]; } }); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { NgRatingBarModule, NgRatingBarComponent as ɵa };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctcmF0aW5nLWJhci5qcyIsInNvdXJjZXMiOlsibmctcmF0aW5nLWJhci9saWIvbmctcmF0aW5nLWJhci5jb21wb25lbnQudHMiLCJuZy1yYXRpbmctYmFyL2xpYi9uZy1yYXRpbmctYmFyLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRVEsSUE4RE47QUFDRiwyQkFWZ0QsSUFBSSxZQUFZLEVBQVU7QUFDekUsMkJBQStDLElBQUksWUFBWSxFQUFVO0FBRTFFLHVCQUFZLEVBQUU7QUFDYiwwQkFBYyxDQUFDLENBQUM7QUFDaEIsNkJBQWlCLENBQUM7QUFDbEIseUJBQWEsQ0FBQztBQUNkLHlCQUFhLENBQUMsQ0FBQztBQUNmLHlCQUFhLEtBQUs7QUFDbEIsS0FBaUI7QUFFbEI7QUFBUztBQUNLO0FBQVMsSUFEckIsUUFBUTtBQUNULFFBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsQ0FBQztBQUM1QyxRQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxTQUFTLENBQUM7QUFDcEQsUUFBRyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLElBQUksU0FBUyxDQUFDO0FBRXZELFFBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDckIsWUFBSyxJQUFJLENBQUMsTUFBTSxHQUFHO0FBQ25CLGdCQUFPLFFBQVEsRUFBRSxNQUFNO0FBQ3ZCLGdCQUFPLGVBQWUsRUFBRSxFQUFFO0FBQzFCLGdCQUFPLE1BQU0sRUFBRSxLQUFLO0FBQ3BCLGFBQU0sQ0FBQztBQUNQLFNBQUk7QUFDSixLQUFFO0FBRUg7QUFBUztBQUEyQjtBQUNwQjtBQUFTLElBRHZCLFdBQVcsQ0FBQyxPQUFzQjtBQUNuQyxRQUFHLElBQUksT0FBTyxhQUFVLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDdEMs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QUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUE5SEEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFvQkEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUdBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUVBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUN4REEsQUFJQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgT25Jbml0LFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBFdmVudEVtaXR0ZXIsXG4gIE9uQ2hhbmdlcyxcbiAgU2ltcGxlQ2hhbmdlc1xufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0eWxlcyB7XG4gIGZvbnRTaXplPzogc3RyaW5nO1xuICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG4gIG1hcmdpbj86IHN0cmluZztcbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmctcmF0aW5nLWJhcicsXG4gIHRlbXBsYXRlOiBgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgaXRlbSBvZiBudW1iZXJzOyBsZXQgaSA9IGluZGV4XCI+XHJcbiAgPHNwYW5cclxuICAgIGNsYXNzPVwic3RhclwiXHJcbiAgICAobW91c2VlbnRlcik9XCJlbnRlcihpKVwiXHJcbiAgICAobW91c2VsZWF2ZSk9XCJsZWF2ZShpKVwiXHJcbiAgICAoY2xpY2spPVwic2V0U2VsZWN0ZWQoaSlcIlxyXG4gICAgW25nU3R5bGVdPVwieydjb2xvcic6IChpIDw9IGhvdmVySW5kZXgpID8gY29sb3JBY3RpdmUgOiBjb2xvckRlZmF1bHR9XCJcclxuICAgIFtzdHlsZS5mb250U2l6ZV09XCJzdHlsZXMuZm9udFNpemVcIlxyXG4gICAgW3N0eWxlLmJhY2tncm91bmRDb2xvcl09XCJzdHlsZXMuYmFja2dyb3VuZENvbG9yXCJcclxuICAgIFtzdHlsZS5tYXJnaW5SaWdodF09XCJzdHlsZXMubWFyZ2luXCJcclxuICA+XHJcbiAgw6LCmMKFXHJcbiAgPHNwYW5cclxuICAgIGNsYXNzPVwic3RhciBoYWxmXCJcclxuICAgICpuZ0lmPVwiIWlzSG92ZXJlZCAmJiBpID09IGhhbGZJbmRleFwiXHJcbiAgICBbc3R5bGUud2lkdGguJV09XCJoYWxmVmFsdWVcIlxyXG4gICAgW3N0eWxlLmNvbG9yXT1cImNvbG9yQWN0aXZlXCJcclxuICA+w6LCmMKFPC9zcGFuPlxyXG48L3NwYW4+XHJcbjwvbmctY29udGFpbmVyPlxyXG5gLFxuICBzdHlsZXM6IFtgLnN0YXJ7cG9zaXRpb246cmVsYXRpdmV9LnN0YXI6bm90KC5oYWxmKXttaW4taGVpZ2h0OjIwcHg7bWluLXdpZHRoOjIwcHg7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2t9LnN0YXIuYWN0aXZle2NvbG9yOmluaGVyaXR9LnN0YXIuaGFsZntoZWlnaHQ6aW5oZXJpdDtmb250LXNpemU6aW5oZXJpdDtjdXJzb3I6cG9pbnRlcjtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7ZGlzcGxheTppbmxpbmUtYmxvY2s7b3ZlcmZsb3c6aGlkZGVufWBdXG59KVxuZXhwb3J0IGNsYXNzIE5nUmF0aW5nQmFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuXG4gIEBJbnB1dCgpIHJhdGluZ0NvdW50OiBudW1iZXI7XG4gIEBJbnB1dCgpIGNvbG9yQWN0aXZlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbG9yRGVmYXVsdDogc3RyaW5nO1xuICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbjtcbiAgQElucHV0KCkgcmVzZXRBYmxlOiBib29sZWFuO1xuXG4gIEBJbnB1dCgpIGNvbnRyb2w6IEZvcm1Db250cm9sO1xuXG4gIEBJbnB1dCgpIHN0eWxlczogU3R5bGVzO1xuXG4gIEBJbnB1dCgpIHZhbHVlOiBudW1iZXI7XG4gIEBPdXRwdXQoKSB2YWx1ZUNoYW5nZTogRXZlbnRFbWl0dGVyPG51bWJlcj4gPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcbiAgQE91dHB1dCgpIGhvdmVyQ2hhbmdlOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuXG4gIG51bWJlcnMgPSBbXTtcbiAgaG92ZXJJbmRleCA9IC0xO1xuICBzZWxlY3RlZFZhbHVlID0gMDtcbiAgaGFsZlZhbHVlID0gMDtcbiAgaGFsZkluZGV4ID0gLTE7XG4gIGlzSG92ZXJlZCA9IGZhbHNlO1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5yYXRpbmdDb3VudCA9IHRoaXMucmF0aW5nQ291bnQgfHwgNTtcbiAgICB0aGlzLmNvbG9yQWN0aXZlID0gdGhpcy5jb2xvckFjdGl2ZSB8fCAnI2VkYjg2Nyc7XG4gICAgdGhpcy5jb2xvckRlZmF1bHQgPSB0aGlzLmNvbG9yRGVmYXVsdCB8fCAnI2QyZDJkMic7XG5cblxuICAgIGlmICghdGhpcy5zdHlsZXMpIHtcbiAgICAgIHRoaXMuc3R5bGVzID0ge1xuICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcnLFxuICAgICAgICBtYXJnaW46ICc1cHgnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlcy52YWx1ZSB8fCB0aGlzLmNvbnRyb2wpIHtcbiAgICAgIHRoaXMuaW5pdE51bWJlcnMoKTtcbiAgICAgIHRoaXMuY2FsY3VsYXRlSGFsZlZhbHVlKCk7XG4gICAgfVxuICB9XG5cbiAgaW5pdE51bWJlcnMoKSB7XG4gICAgdGhpcy5udW1iZXJzID0gQXJyYXkodGhpcy5yYXRpbmdDb3VudClcbiAgICAgIC5maWxsKDApXG4gICAgICAubWFwKCh4LCBpKSA9PiBpKTtcbiAgICBpZiAodGhpcy5jb250cm9sKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWUgPSB0aGlzLmNvbnRyb2wudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5ob3ZlckluZGV4ID0gdGhpcy5zZWxlY3RlZFZhbHVlIC0gMTtcbiAgfVxuXG4gIGVudGVyKGk6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNIb3ZlcmVkID0gdHJ1ZTtcbiAgICB0aGlzLmhvdmVySW5kZXggPSBpO1xuICAgIHRoaXMuaG92ZXJDaGFuZ2UuZW1pdCgxICsgaSk7XG5cblxuICB9XG4gIGxlYXZlKGk6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNIb3ZlcmVkID0gZmFsc2U7XG4gICAgdGhpcy5ob3ZlckluZGV4ID0gdGhpcy5zZWxlY3RlZFZhbHVlIC0gMTtcbiAgfVxuXG4gIHNldFNlbGVjdGVkKGk6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVzZXRBYmxlICYmIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9PT0gaSArIDEpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IGkgKyAxO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbnRyb2wpIHtcbiAgICAgIHRoaXMuY29udHJvbC5zZXRWYWx1ZSh0aGlzLnNlbGVjdGVkVmFsdWUgfHwgbnVsbCk7XG4gICAgICB0aGlzLmNvbnRyb2wubWFya0FzVG91Y2hlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy5zZWxlY3RlZFZhbHVlKTtcbiAgICB9XG4gICAgdGhpcy5pc0hvdmVyZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhbGN1bGF0ZUhhbGZWYWx1ZSgpO1xuICB9XG5cbiAgY2FsY3VsYXRlSGFsZlZhbHVlKCkge1xuICAgIHRoaXMuaGFsZlZhbHVlID0gTWF0aC5yb3VuZCgxMDAgKiAodGhpcy5zZWxlY3RlZFZhbHVlIC0gTWF0aC5mbG9vcih0aGlzLnNlbGVjdGVkVmFsdWUpKSApO1xuICAgIHRoaXMuaGFsZkluZGV4ID0gTWF0aC5jZWlsKHRoaXMuc2VsZWN0ZWRWYWx1ZSkgLSAxO1xuICB9XG5cblxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBOZ1JhdGluZ0JhckNvbXBvbmVudCB9IGZyb20gJy4vbmctcmF0aW5nLWJhci5jb21wb25lbnQnO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW05nUmF0aW5nQmFyQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW05nUmF0aW5nQmFyQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBOZ1JhdGluZ0Jhck1vZHVsZSB7IH1cbiJdfQ==